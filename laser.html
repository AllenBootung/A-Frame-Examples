<!DOCTYPE html>
<html>

<head>
	<title>Hello, WebVR! - A-Frame</title>
	<meta name="description" content="Hello, WebVR! - A-Frame">
	<script src="js/aframe-master.js"></script>
	<script src="js/aframe-animation-component.min.js"></script>
	<script src="js/aframe-extras.min.js"></script>
</head>

<body>

<script>

AFRAME.registerComponent('mousey', {
	
	init: function()
	{
		let mesh = this.el.getObject3D("mesh");
		
		this.el.addEventListener("mouseenter", function(event)
		{
			mesh.material.color.set("red");
		});
		
		this.el.addEventListener("mousedown", function(event)
		{
			mesh.material.color.set("yellow");
		});

		this.el.addEventListener("mouseleave", function(event)
		{
			mesh.material.color.set("blue");
		});
	}
	
});

AFRAME.registerComponent('pointer', {
	
	init: function()
	{
		// let mesh = this.el.getObject3D("mesh");
		
		this.el.addEventListener("raycaster-intersection", function(event)
		{
			this.setAttribute("line", "color", "#88FF88");
			//mesh.material.color.set("#88FF88");
		});
		
		this.el.addEventListener("raycaster-intersection-cleared", function(event)
		{
			this.setAttribute("line", "color", "#FF8888");
			//mesh.material.color.set("#FF8888");
		});
	}
	
});


</script>

<a-scene antialias="true">
	
	<a-assets>
		<img id="grid" src="images/border.png" crossorigin="anonymous" />
		<img id="sky" src="images/stars.jpg" crossorigin="anonymous" />
	</a-assets>
	  
	<!-- Default lights: one directional light from top left, one small ambient light.
		 Adding a light manually will remove the default lighting setup.
		
		Custom light setup:
		<a-entity 
			light="type: ambient; color: #666666;" 
		</a-entity>
		<a-entity 
			light="type: directional; color: #FFFFFF; castShadow: true;" 
			position="-1 4 0">
		</a-entity>
		
		
	-->

	<!--
		This allows user to move with WASD keys
		<a-entity position="0 1.6 1" camera look-controls wasd-controls></a-entity>
	-->

	<a-entity movement-controls="speed: 0.1; fly: false;" position="0 0 0">
		<a-entity camera position="0 1.5 1" look-controls></a-entity>
		<a-entity id="leftHand" laser-controls="hand: left" raycaster="far: 5;" line="color: #FF00FF" pointer></a-entity>
		<a-entity id="rightHand" laser-controls="hand: right" raycaster="far: 5;" line="color: #FFFF00" pointer></a-entity>
	</a-entity>
	
	<a-sky 
		rotation = "0 0 0"
		color = "#FFFFFF"
		material = "src: #sky">
	</a-sky>

	<a-plane
		width="100" height="100"
		position=" 0.00 0.00 0.00" 
		rotation="-90 0 0" 
		color="#8888FF" 
		material="src: #grid; repeat:100 100; transparent: true; opacity: 0.75"
		shadow="cast: false; receive: true">
	</a-plane>

	<a-box
		width = "1" height = "1" depth = "1"
		position = "-2.0 0.5 -3.0"
		color = "#FF4444" 
		material = "src: #grid"
		mousey>
	</a-box>
	
	<a-box
		width = "1" height = "1" depth = "1"
		position = "0.0 0.5 -3.0"
		color = "#CCFFCC" 
		material = "src: #grid"
		mousey>
	</a-box>

	<a-box
		width = "1" height = "1" depth = "1"
		position = "2.0 0.5 -3.0"
		color = "#CCCCFF" 
		material = "src: #grid"
		mousey>
	</a-box>

	
</a-scene>
</body>
</html>